---
title: 'For each'
description: 'How to use for each flow'
---

```mermaid
%%{
  init: {
    'theme': 'base',
    'themeVariables': {
      'primaryColor': '#8232ff',
      'primaryTextColor': '#fff',
      'primaryBorderColor': '#141450',
      'lineColor': '#33CCCC',
      'tertiaryTextColor': "#fff",
      'secondaryColor': '#141450',
      'tertiaryColor': '#141450'
    }
  }
}%%
flowchart LR
    IN("IN") --> forEach
    subgraph forEach [For Each]
        direction LR
        B["Agent 1"]
        C["Agent 2"]
        D["Agent ..."]
        E["Agent N"]
    end
    forEach --> OUT("OUT")
```

Declare agents

```ts
const githubAgent = agent({
  model: openai('gpt-4o'),
  system: 'You are a github crawler...',
})

const responseAgent = agent({
  model: openai('gpt-4o'),
  system: 'You are responsible for summarizing issues on github...',
})
```

Declare flow

```ts
const processGithubIssuesFlow = sequence([
  {
    agent: 'githubAgent',
    input: 'Go to Github and get the top 3 most popular issues and number of open issues.',
  },
  forEach({
    item: 'Github issue and total number of open issues',
    input: {
      agent: 'responseAgent',
      input: 'Send an email to the project maintainer.',
    },
  })
])
```

Execute

```ts
execute(processGithubIssues, {
  agents: {
    githubAgent,
    responseAgent
  }
})
```
